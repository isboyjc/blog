# å¦‚ä½•ä½¿ (a == 1 && a == 2 && a == 3) æˆç«‹ï¼Ÿ

## é¢˜å¹²

```js
(a == 1 && a == 2 && a == 3) // ?
```

è€ƒéªŒï¼šå¯¹è±¡åŸå§‹å€¼è½¬æ¢

## é¢˜è§£

- åˆ©ç”¨ `==` è¿ç®—ç¬¦ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢çš„ç‰¹æ€§ï¼Œé‡å†™å¯¹è±¡çš„ `toString` æˆ– `valueOf` æ–¹æ³•ï¼Œä½¿å…¶æ¯æ¬¡è¿”å›ä¸åŒçš„å€¼ã€‚

- åˆ©ç”¨ `Object.defineProperty` æ–¹æ³•ï¼Œå®šä¹‰ä¸€ä¸ª `get` å‡½æ•°ï¼Œä½¿å…¶æ¯æ¬¡è¿”å›ä¸åŒçš„å€¼ã€‚

- TODO...


ğŸŒ°ï¼š

```js
// æ–¹æ³•ä¸€
let a = { value: 0 }
a.toString = function() {
  return this.value += 1;
}
console.log(a == 1 && a == 2 && a == 3); // true


// æ–¹æ³•äºŒ
let a = [1,2,3];
a.toString = a.shift;
console.log(a == 1 && a == 2 && a == 3); // true


// æ–¹æ³•ä¸‰
let a = { value: 0 }
a.valueof = function(){
  return this.value += 1;
}
console.log(a == 1 && a == 2 && a == 3); // true


// æ–¹æ³•å››
Object.defineProperty(window,'a',{
  get:function() {
    this.value ? this.value++ : this.value = 1;
    return this.value;
  }
})
console.log(a == 1 && a == 2 && a == 3); // true


// æ–¹æ³•äº”
let a = { value: 0 }
a[Symbol.toPrimitive] = function(hint) {
  console.log(hint); // default 
  return this.value += 1;
}
console.log(a == 1 && a == 2 && a == 3); // true
```

## ç›¸å…³

[å¯¹è±¡åŸå§‹å€¼è½¬æ¢](https://zh.javascript.info/object-toprimitive)

