# å¦‚ä½•ä½¿ (a == 1 && a == 2 && a == 3) æˆç«‹ï¼Ÿ

## é¢˜å¹²

```js
(a == 1 && a == 2 && a == 3) // ?
```

- å¯¹è±¡åŸå§‹å€¼è½¬æ¢

## é¢˜è§£

- åˆ©ç”¨ `obj[Symbol.toPrimitive](hint)` æ–¹æ³•ï¼Œä½¿å…¶æ¯æ¬¡è¿”å›ä¸åŒçš„å€¼ã€‚

- åˆ©ç”¨ `==` è¿ç®—ç¬¦ä¼šè¿›è¡Œéšå¼ç±»å‹è½¬æ¢çš„ç‰¹æ€§ï¼Œé‡å†™å¯¹è±¡çš„ `toString` æˆ– `valueOf` æ–¹æ³•ï¼Œä½¿å…¶æ¯æ¬¡è¿”å›ä¸åŒçš„å€¼ã€‚

- åˆ©ç”¨ `Object.defineProperty` æ–¹æ³•åŠ«æŒï¼Œå®šä¹‰ä¸€ä¸ª `get` å‡½æ•°ï¼Œä½¿å…¶æ¯æ¬¡è¿”å›ä¸åŒçš„å€¼ã€‚


ğŸŒ°ï¼š

```js
// æ–¹æ³•ä¸€
let a = { value: 0 }
a.toString = function() {
  return this.value += 1;
}
console.log(a == 1 && a == 2 && a == 3); // true


// æ–¹æ³•äºŒ
let a = [1,2,3];
a.toString = a.shift;
console.log(a == 1 && a == 2 && a == 3); // true


// æ–¹æ³•ä¸‰
let a = { value: 0 }
a.valueof = function(){
  return this.value += 1;
}
console.log(a == 1 && a == 2 && a == 3); // true


// æ–¹æ³•å››
Object.defineProperty(window,'a',{
  get:function() {
    this.value ? this.value++ : this.value = 1;
    return this.value;
  }
})
console.log(a == 1 && a == 2 && a == 3); // true


// æ–¹æ³•äº”
let a = { value: 0 }
a[Symbol.toPrimitive] = function(hint) {
  console.log(hint); // default 
  return this.value += 1;
}
console.log(a == 1 && a == 2 && a == 3); // true
```

## æ‰©å±•

### å¯¹è±¡åŸå§‹å€¼è½¬æ¢æ­¥éª¤

å¯¹è±¡åŸå§‹å€¼è½¬æ¢æ—¶ï¼Œ`JS` ä¼šå°è¯•æŸ¥æ‰¾å¹¶è°ƒç”¨ä¸‰ä¸ªå¯¹è±¡æ–¹æ³•ï¼š

- è°ƒç”¨ `obj[Symbol.toPrimitive](hint)` â€”â€” å¸¦æœ‰ `symbol` é”® `Symbol.toPrimitive`ï¼ˆç³»ç»Ÿ `symbol`ï¼‰çš„æ–¹æ³•ï¼Œå¦‚æœè¿™ä¸ªæ–¹æ³•å­˜åœ¨çš„è¯ã€‚

- å¦åˆ™ï¼Œå¦‚æœ `hint` æ˜¯ `"string"` â€”â€” å°è¯•è°ƒç”¨ `obj.toString()` æˆ– `obj.valueOf()`ï¼Œæ— è®ºå“ªä¸ªå­˜åœ¨ã€‚

- å¦åˆ™ï¼Œå¦‚æœ `hint` æ˜¯ `"number"` æˆ– `"default"` â€”â€” å°è¯•è°ƒç”¨ `obj.valueOf()` æˆ– `obj.toString()`ï¼Œæ— è®ºå“ªä¸ªå­˜åœ¨ã€‚

è¯¦è§ [ç°ä»£JavaScript - å¯¹è±¡åŸå§‹å€¼è½¬æ¢](https://zh.javascript.info/object-toprimitive) ä¸€èŠ‚ã€‚
## ç›¸å…³

[ç°ä»£JavaScript - å¯¹è±¡åŸå§‹å€¼è½¬æ¢](https://zh.javascript.info/object-toprimitive)

