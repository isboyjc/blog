---
title: ã€Œç¡¬æ ¸JSã€ä»¤ä½ è¿·æƒ‘çš„ä½è¿ç®—
tags: [JavaScript]
categories: ç¡¬æ ¸JSç³»åˆ—
index_img: https://gitee.com/IsboyJC/PictureBed/raw/master/other/js.jpg
date: 2020-12-01 08:00:00
---

<!-- more -->

## å†™åœ¨å‰é¢

ä»Šå¤©ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ ä¸€ä¸‹ JS æ“ä½œç¬¦ä¸­çš„ä½æ“ä½œç¬¦

åœ¨ JS è¿™é—¨è¯­è¨€çš„æ ‡å‡†é‡Œï¼Œæè¿°äº†ä¸€ç»„å¯ä»¥ç”¨æ¥æ“ä½œæ•°æ®å€¼çš„æ“ä½œç¬¦ï¼Œå…¶ä¸­åŒ…æ‹¬ æ•°å­¦æ“ä½œç¬¦ã€ä½æ“ä½œç¬¦ã€å…³ç³»æ“ä½œç¬¦ã€ç›¸ç­‰æ“ä½œç¬¦ã€å¸ƒå°”æ“ä½œç¬¦ã€æ¡ä»¶æ“ä½œç¬¦ä»¥åŠES7çš„æŒ‡æ•°æ“ä½œç¬¦ ç­‰ç­‰ï¼Œä¸ºä»€ä¹ˆå«æ“ä½œç¬¦ï¼Œå› ä¸ºå®ƒä»¬éƒ½æ˜¯ç¬¦å·æ„æˆã€‚ã€‚ã€‚

åœ¨è¿™ä¸€ç»„æ“ä½œç¬¦ä¸­ï¼Œç›¸æ¯”åŠ å‡ä¹˜é™¤ã€é€»è¾‘åˆ¤æ–­ã€ç›¸ç­‰ã€å¸ƒå°”ç­‰è¿™äº›æˆ‘ä»¬ç»å¸¸ä¼šç”¨åˆ°çš„æ“ä½œç¬¦ï¼Œä½è¿ç®—æ“ä½œç¬¦å¥½åƒæ˜¯æå…¶ç‰¹æ®Šçš„ä¸€ç±»ï¼Œç”±äºä½æ“ä½œç¬¦ä¸æ˜¯é‚£ä¹ˆçš„ç›´è§‚å¯¼è‡´å¾ˆå¤šåˆšå…¥é—¨ç”šè‡³æ˜¯è€ç¨‹åºå‘˜éƒ½ä¸å¤ªå–œæ¬¢ç”¨å®ƒ

å¤§å¤šæ•°äººéƒ½è®¤ä¸ºåœ¨å†™ç¨‹åºçš„è¿‡ç¨‹ä¸­ä½¿ç”¨è¿‡å¤šèŠ±é‡Œèƒ¡å“¨çš„ä½æ“ä½œç¬¦å¯¹é˜…è¯»ä½“éªŒæ˜¯æå…¶ä¸å¥½çš„ï¼Œå°½ç®¡å®ƒå¯èƒ½ä¼šä¸ºæ€§èƒ½å¸¦æ¥ä¸€äº›æå‡ï¼Œä½†æ˜¯ç›¸æ¯”ä¸‹æ¥ä¸€ä¸ªé¡¹ç›®è¦é€‰æ‹©é˜…è¯»ä½“éªŒå’Œäº›è®¸æ€§èƒ½çš„è¯ï¼Œå¤§å®¶å¤§æ¦‚ç‡çš„ä¼šé€‰æ‹©å‰è€…

è¯æ˜¯è¿™æ ·è¯´ï¼Œä½†æ˜¯è¿™å¹¶ä¸æ˜¯å¤§å®¶ä¸å­¦ä¹ å®ƒçš„ç†ç”±ï¼Œå‡å¦‚å¤§å®¶éƒ½æ‡‚å¾—ä½è¿ç®—ï¼Œé‚£ä¹ˆè¿™äº› `éªšæ“ä½œ` å°±å˜æˆäº†å¸¸è§„æ“ä½œï¼Œæœ‰çš„äººå¯èƒ½ä¼šè¯´å°±ç®—æ‡‚å¾—ä½è¿ç®—ï¼Œæƒ³è¦é˜…è¯»ä¸€æ®µä½æ“ä½œç¬¦ç»„æˆçš„çš„ä»£ç è¿˜æ˜¯éœ€è¦æ—¶é—´æ¥æ€è€ƒçš„ï¼Œå¹¶ä¸å¦‚é€šä¿—ç‚¹å†™æ¥çš„ç›´è§‚ï¼Œå—¯ï¼Œä¹Ÿå¯¹ï¼Œä½†æ˜¯åŠ ä¸Šå½“é‡æ³¨é‡Šçš„è¯ä¹Ÿè¿˜è¡Œ

æ€»ä¹‹ï¼Œä½ å¯ä»¥ä¸ç”¨ï¼Œä½†ä¸€å®šè¦ä¼šï¼Œå­˜åœ¨å³åˆç†ï¼Œä»»ä½•è¯´æ³•éƒ½ä¸æ˜¯ä¸å­¦ä¹ å®ƒçš„ç†ç”±

```js
(!(~+[])+{})[--[~+""][+[]]*[~+[]]+~~!+[]]+({}+[])[[~!+[]]*~+[]]
```

å—¯ï¼Œå°±ä»¥è¿™ä¸€æ®µç½‘çº¢ä»£ç ä¸ºå¼€å¤´å§

çœ‹æ­¤æ–‡ä¹‹å‰ï¼Œè¯·ä¸€å®šè¦å…ˆé˜…è¯»è¿™ç¯‡æ–‡ç«  

- [ã€Œç¡¬æ ¸JSã€æ•°å­—ä¹‹ç¾](https://github.com/isboyjc/blog/issues/25) 
- [ã€Œç¡¬æ ¸JSã€æ•°å­—ä¹‹ç¾](https://github.com/isboyjc/blog/issues/25) 
- [ã€Œç¡¬æ ¸JSã€æ•°å­—ä¹‹ç¾](https://github.com/isboyjc/blog/issues/25) 

é‡è¦çš„äº‹æƒ…è¯´ä¸‰éï¼Œä¸Šé¢è¿™ç¯‡æ–‡ç« å°±æ˜¯ç»™æ­¤æ–‡åšå‡†å¤‡çš„ï¼Œæ–‡ä¸­è®²äº†ä¸€äº›æ•°å­—ç›¸å…³çš„ä¸œè¥¿ï¼ŒäºŒè¿›åˆ¶è½¬æ¢ã€åŸç ã€åç ã€è¡¥ç ä»¥åŠ JS ä¸­çš„æ•°å­—å­˜å‚¨ç­‰ç­‰ï¼Œçœ‹å®Œä¸Šæ–‡å†çœ‹æ­¤æ–‡ä¼šå¾ˆ easy

ä¹Ÿæ˜¯ç»™å¤§å®¶å›é¡¾ä¸‹ä¸€äº›è®¡ç®—æœºåŸºç¡€å¸¸è¯†ï¼Œä¼°è®¡å¤§å®¶ä¹…å¾æ²™åœºè¿™äº›åŸºç¡€éƒ½å¿˜å®Œäº†ï¼Œä¸ç„¶ç›´æ¥å•ƒä¼šæœ‰ç‚¹è¿· ğŸ˜‚





## ä½è¿ç®—

æ¥å›é¡¾ä¸€ä¸‹ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“ï¼Œå¹³å¸¸æˆ‘ä»¬ç”¨æ¥è®¡ç®—çš„æ˜¯åè¿›åˆ¶çš„æ•°å€¼ `0~9` ï¼Œä½†æ˜¯è®¡ç®—æœºæ˜¯ä¸ªæœºå™¨ï¼Œå®ƒåªèƒ½è¯†åˆ«äºŒè¿›åˆ¶

æ ¹æ®å›½é™… IEEE 754 æ ‡å‡†ï¼Œ`JavaScript` åœ¨å­˜å‚¨æ•°å­—æ—¶æ˜¯å§‹ç»ˆä»¥åŒç²¾åº¦æµ®ç‚¹æ•°æ¥å­˜å‚¨çš„ï¼Œè¿™ç§æ ¼å¼ç”¨ 64 ä½äºŒè¿›åˆ¶å­˜å‚¨æ•°å€¼ï¼Œ64 ä½ä¹Ÿå°±æ˜¯ 64 æ¯”ç‰¹ï¼ˆbitï¼‰ï¼Œç›¸å½“äº 8 ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­ 0 åˆ° 51 å­˜å‚¨æ•°å­—ï¼ˆç‰‡æ®µï¼‰ï¼Œ52 åˆ° 62 å­˜å‚¨æŒ‡æ•°ï¼Œ63 ä½å­˜å‚¨ç¬¦å·

è€Œåœ¨ JS ä½è¿ç®—ä¸­ï¼Œå¹¶ä¸ä¼šç”¨ 64 ä½æ¥è®¡ç®—ï¼Œå®ƒä¼šå…ˆåœ¨åå°æŠŠå€¼è½¬æ¢ä¸º 32 ä½æ•°å€¼ï¼Œå†è¿›è¡Œä½è¿ç®—æ“ä½œï¼Œä½è¿ç®—è®¡ç®—å®Œæˆåå†å°† 32 ä½è½¬ä¸º 64 ä½å­˜å‚¨ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±åƒåœ¨å¤„ç† 32 ä½æ•°å€¼ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬äº†è§£ä½è¿ç®—æ—¶ï¼Œåªéœ€è¦å…³æ³¨è¿™ 32 ä½äºŒè¿›åˆ¶æ•´æ•°å°±å¯ä»¥ï¼Œå› ä¸º 64 ä½å­˜å‚¨æ ¼å¼æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯ä¹Ÿæ­£æ˜¯å› ä¸ºåå°è¿™ä¸ªé»˜è®¤è½¬æ¢æ“ä½œï¼Œç»™ JS è¿™é—¨è¯­è¨€äº§ç”Ÿäº†ä¸€ä¸ªå‰¯ä½œç”¨ï¼Œå³ç‰¹æ®Šå€¼ NaN å’Œ Infinity åœ¨ä½è¿ç®—ä¸­éƒ½ä¼šç›´æ¥è¢«å½“ä½œ 0 æ¥å¤„ç†

å…¶å®ä¸æ­¢æ˜¯ JS ï¼Œå¾ˆå¤šè¯­è¨€çš„ä½è¿ç®—éƒ½æ˜¯å¦‚æ­¤



### æœ‰ç¬¦å·&æ— ç¬¦å·

ç©¿æ’ä¸€ä¸ªå°çŸ¥è¯†ç‚¹ï¼Œ `ECMAScript` æ•´æ•°æœ‰ä¸¤ç§ç±»å‹ï¼Œå³æœ‰ç¬¦å·æ•´æ•°ï¼ˆå…è®¸ç”¨æ­£æ•°å’Œè´Ÿæ•°ï¼‰å’Œæ— ç¬¦å·æ•´æ•°ï¼ˆåªå…è®¸ç”¨æ­£æ•°ï¼‰

åœ¨ ECMAScript ä¸­ï¼Œæ‰€æœ‰æ•´æ•°å­—é¢é‡é»˜è®¤éƒ½æ˜¯æœ‰ç¬¦å·æ•´æ•°

æœ‰ç¬¦å·æ•´æ•°ä¹Ÿå°±æ˜¯ä¸Šæ–‡æ‰€è¯´ï¼ŒäºŒè¿›åˆ¶å·¦ä¾§é¦–ä½æ˜¯ç¬¦å·ä½æ¥è¡¨æ˜è¯¥æ•°å­—æ­£è´Ÿ

è€Œæ— ç¬¦å·æ•´æ•°å°±æ˜¯æ²¡æœ‰ç¬¦å·ä½ï¼Œæ²¡æœ‰äº†ç¬¦å·ä½ç½®ä¹Ÿå°±è¯´å®ƒè¡¨è¾¾ä¸äº†è´Ÿæ•°ï¼ŒåŒæ—¶å› ä¸ºæ²¡æœ‰äº†ç¬¦å·ä½ç½®ï¼Œå®ƒçš„å­˜å‚¨èŒƒå›´ä¹Ÿä¼šæ¯”æœ‰ç¬¦å·æ•´æ•°å­˜å‚¨èŒƒå›´å¤§

ç°åœ¨æˆ‘ä»¬æˆ‘ä»¬æ­£å¼å¼€å§‹è¯´ä½è¿ç®—ç¬¦äº†ï¼Œä½è¿ç®—ç¬¦å·ä¸€å…±åˆ† 7 ä¸ªï¼Œæˆ‘ä»¬ä¸€ä¸ªä¸ªé“æ¥



### æŒ‰ä½é NOTï¼ˆ~ï¼‰

#### ç®€è¿°

æŒ‰ä½éæ“ä½œç¬¦ä¹Ÿå¯ä»¥å«æŒ‰ä½å–åï¼Œå®ƒä½¿ç”¨ `~` ç¬¦å·è¡¨ç¤ºï¼Œä½œç”¨æ˜¯å¯¹ä½å–åï¼Œ1 å˜æˆ 0 ï¼Œ0 å˜æˆ 1

çœ‹è¿‡ä¸Šæ–‡çš„å°ä¼™ä¼´ä»¬å¯èƒ½å°±ä¼šå‘ç°ï¼Œè¿™å¥½åƒæ˜¯å–çš„åç ï¼Ÿ

æ˜¯çš„ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç›´æ¥ç†è§£ä¸ºæŒ‰ä½éå°±æ˜¯å–å…¶äºŒè¿›åˆ¶çš„åç ï¼Œåªä¸è¿‡ï¼Œåç æ˜¯ç¬¦å·ä½ä¸å˜å…¶ä½™ä½ç½®å–åï¼Œè€ŒæŒ‰ä½éåˆ™æ˜¯å–åç åç¬¦å·ä½ä¹Ÿå–å



**ä¾‹å¦‚ï¼š**

æˆ‘ä»¬ä»¥ 8 ä½ï¼ˆbitï¼‰æ•°å­—å­˜å‚¨ä¸ºä¾‹

æ±‚åè¿›åˆ¶æ•°å­— 2 çš„æŒ‰ä½éï¼Œåè¿›åˆ¶æ•°å­— 2 çš„äºŒè¿›åˆ¶æ˜¯ `0000 0010`ï¼Œé‚£ä¹ˆå®ƒçš„äºŒè¿›åˆ¶åç å°±æ˜¯ `0111 1101`ï¼Œç¬¦å·ä½ä¹Ÿå–ååˆ™å˜æˆäº† `1111 1101`ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥å°†æ•°å­— 2 çš„äºŒè¿›åˆ¶æ¯ä¸€ä½å–åï¼Œç»“æœéƒ½æ˜¯ `1111 1101` 

æˆ‘ä»¬çŸ¥é“ç¬¦å·ä½ä¸º 1 ä»£è¡¨æ˜¯è´Ÿæ•°ï¼Œè€Œè®¡ç®—æœºä¸­å­˜å‚¨è´Ÿæ•°æ˜¯ä»¥è¡¥ç çš„æ–¹å¼æ¥å­˜å‚¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹è¡¥ç  `1111 1101` æ±‚åŸç å†è½¬æˆåè¿›åˆ¶å³å¯ï¼Œå¯¹è¡¥ç æ±‚åŸç å°±æ˜¯ä½¿ç”¨æ­¤è¡¥ç å†æ±‚ä¸€éè¡¥ç ï¼Œä¹Ÿå°±æ˜¯å…ˆå–åç å†è¡¥ 1 ï¼Œè¿‡ç¨‹è‡ªç®—ï¼Œå¾—åˆ°äº†è´Ÿæ•°çš„äºŒè¿›åˆ¶åŸç  `1000 00 11`ï¼Œå³åè¿›åˆ¶ `-3`  

åŒä¸Šæ‰€è¿°

åè¿›åˆ¶æ•°å­— 1 çš„æŒ‰ä½éå³åè¿›åˆ¶ `-2` 

åè¿›åˆ¶æ•°å­— 0 çš„æŒ‰ä½éå³åè¿›åˆ¶ `-1`  

ä¸Šé¢è¯´çš„éƒ½æ˜¯æ­£æ•°ï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸ªè´Ÿæ•°çš„ä¾‹å­

åè¿›åˆ¶æ•°å­— -1 ç”±äºæ˜¯è´Ÿæ•°ï¼Œä¸Šæ–‡æˆ‘ä»¬è¯´è¿‡è®¡ç®—æœºä¸­äºŒè¿›åˆ¶å­˜å‚¨è´Ÿæ•°ä¸ºè¡¥ç æ–¹å¼ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆæ±‚ -1 çš„è¡¥ç ï¼Œ-1 äºŒè¿›åˆ¶åŸç æ˜¯ `1000 0001`ï¼Œå†æ±‚åŸç çš„åç å³ `1111 1110` ï¼Œæ¥ç€è¡¥ 1 å³å¯æ±‚è¡¥ç å³ `1111 1111`ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¾—åˆ°äº† -1 åœ¨äºŒè¿›åˆ¶ä¸­å­˜å‚¨çš„çš„æœ€ç»ˆè¡¥ç å½¢æ€å³ä¸º `1111 1111` ï¼Œæœ€ç»ˆæˆ‘ä»¬å°†æ­¤äºŒè¿›åˆ¶æ¯ä¸€ä½éƒ½å–åå¾—åˆ° `0000 0000 `ï¼Œå³åè¿›åˆ¶æ•°å­— 0



è¯¶ï¼å¥½åƒæœ‰è§„å¾‹ï¼Œæˆ‘ä»¬è¯•äº†å‡ æ¬¡ä¹‹åå‘ç°æŒ‰ä½éçš„æœ€ç»ˆç»“æœå§‹ç»ˆæ˜¯å¯¹åŸæ•°å€¼å–åå¹¶å‡ä¸€ï¼Œå¦‚ä¸‹

```js
let a = 1
console.log(~a == (-a) - 1) // true

// å¾—åˆ°
~x = (-x) - 1
```

çŸ¥é“è¿™ä¸ªä¹‹åï¼Œæˆ‘ä»¬é‡åˆ°æŒ‰ä½éæ“ä½œç¬¦åå¯ä»¥æ ¹æ®è¿™ä¸ªè§„å¾‹æ¥ç®—ç»“æœï¼Œä¼šæ¯”è½¬äºŒè¿›åˆ¶è®¡ç®—é‚£æ ·æ–¹ä¾¿äº›

é‚£ä¹ˆåˆæœ‰äººè¯´äº†ï¼Œæ—¢ç„¶å’Œ `(-x) - 1` æ˜¯ä¸€è‡´çš„ï¼Œé‚£ä¹ˆä¸ºä»€ä¹ˆè¿˜è¦ç”¨æŒ‰ä½éå‘¢

å¾ˆç®€å•ï¼ŒåŸå› æœ‰äºŒï¼Œç¬¬ä¸€æ˜¯ä½è¿ç®—çš„æ“ä½œæ˜¯åœ¨æ•°å€¼åº•å±‚è¡¨ç¤ºä¸Šå®Œæˆçš„ï¼Œé€Ÿåº¦å¿«ã€‚ç¬¬äºŒæ˜¯å› ä¸ºå®ƒåªç”¨ 2 ä¸ªå­—ç¬¦ï¼Œæ¯”è¾ƒæ–¹ä¾¿ã€‚ã€‚ã€‚



#### ä½¿ç”¨æŒ‰ä½é ~ åˆ¤æ–­æ˜¯å¦ç­‰äº-1

æŒ‰ä½éåœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨é¢‘ç‡è¿˜æ˜¯è›®é«˜çš„

ç›¸ä¿¡å¤§å®¶ç»å¸¸çœ‹åˆ°ä¸‹é¢è¿™ç§å†™æ³•

```js
let str = "abcdefg"

if(!~str.indexOf("n")){
	console.log("å­—ç¬¦ä¸² str ä¸­ä¸å­˜åœ¨å­—ç¬¦ n")
}

// ç­‰åŒäº

if(str.indexOf("n") == "-1"){
  console.log("å­—ç¬¦ä¸² str ä¸­ä¸å­˜åœ¨å­—ç¬¦ n")
}
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œæˆ‘ä»¬çŸ¥é“ `indexOf` æ–¹æ³•åœ¨æ‰¾ä¸åˆ°ç›¸åŒå€¼æ—¶è¿”å› -1ï¼Œè€Œ `~-1 == 0 == false` ï¼Œæ‰€ä»¥ `!~-1 == 1 == true` ï¼Œä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä½¿ç”¨æŒ‰ä½éçš„å†™æ³•æ¥æ ¡éªŒ -1 æ˜¯ç”¨çš„æœ€å¤šï¼Œä¹Ÿæ˜¯ä½è¿ç®—ä¸­æœ€å®¹æ˜“ä»¤å¤§å®¶æ¥å—çš„äº†ï¼Œæ˜¯ä¸æ˜¯ç‰¹åˆ«ç®€å•æ–¹ä¾¿å‘¢



#### ä½¿ç”¨æŒ‰ä½é ~ å–æ•´

æŒ‰ä½éçš„éªšæ“ä½œä¸­ï¼Œè¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒæ™®éçš„å°±æ˜¯ä½è¿ç®—åŒéå–æ•´äº†ï¼Œå¦‚ä¸‹æ‰€ç¤º

```js
~~3.14 == 3
```

å¾ˆå¤šäººçŸ¥é“è¿™æ ·å¯ä»¥å–æ•´ï¼Œä½†æ˜¯ç”±äºä¸çŸ¥é“å…·ä½“æ˜¯ä¸ºä»€ä¹ˆè€Œä¸æ•¢ç”¨ï¼Œæ‰€ä»¥æˆ‘ä»¬æ¥è§£é‡Šä¸‹ä¸ºä»€ä¹ˆå®ƒä¸ºä»€ä¹ˆå¯ä»¥å–æ•´

ä¸Šé¢æˆ‘ä»¬è¯´è¿‡ï¼Œåœ¨ JS ä½è¿ç®—ä¸­ï¼Œå¹¶ä¸ä¼šç”¨ 64 ä½æ¥è®¡ç®—ï¼Œå®ƒä¼šå…ˆåœ¨åå°æŠŠå€¼è½¬æ¢ä¸º 32 ä½æ•´æ•°ï¼Œå†è¿›è¡Œä½è¿ç®—æ“ä½œï¼Œä½è¿ç®—è®¡ç®—å®Œæˆåå†å°† 32 ä½è½¬ä¸º 64 ä½å­˜å‚¨ï¼Œæ•´ä¸ªè¿‡ç¨‹å°±åƒåœ¨å¤„ç† 32 ä½æ•°å€¼ä¸€æ ·ï¼Œæ‰€ä»¥æˆ‘ä»¬äº†è§£ä½è¿ç®—æ—¶ï¼Œåªéœ€è¦å…³æ³¨è¿™ 32 ä½äºŒè¿›åˆ¶æ•´æ•°å°±å¯ä»¥

è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ32 ä½ `æ•´æ•°`ï¼Œä½è¿ç®—æ“ä½œçš„æ˜¯æ•´æ•°ï¼Œåå°åœ¨è¿›è¡Œ 64 ä½åˆ° 32 ä½è½¬æ¢æ—¶ï¼Œä¼šå¿½ç•¥æ‰å°æ•°éƒ¨åˆ†ï¼Œåªå…³æ³¨æ•´æ•°ã€æ•´æ•°ã€æ•´æ•°ï¼Œè®°ä½äº†

```js
~3.14 == ~3
-5.89 == ~5
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œæ¥ç€æˆ‘ä»¬å†æŒ‰ç…§ä¸Šé¢çš„å…¬å¼

```js
~x == (-x) - 1

~~x == -((-x) - 1) -1 == -(-x) + 1 -1 == x
```

æ‰€ä»¥ä½è¿ç®—ä¸­çš„åŒé `~~` å³å¯å–æ•´ï¼Œæ­¤å–æ•´æ˜¯å®Œå…¨å¿½ç•¥å°æ•°éƒ¨åˆ†





### æŒ‰ä½ä¸ ANDï¼ˆ&ï¼‰

#### ç®€è¿°

æŒ‰ä½ä¸æ“ä½œç¬¦ä¹Ÿå°±æ˜¯ç¬¦å· `&` ï¼Œå®ƒæœ‰ä¸¤ä¸ªæ“ä½œæ•°ï¼Œå…¶å®å°±æ˜¯å°†ä¸¤ä¸ªæ“ä½œæ•°çš„äºŒè¿›åˆ¶æ¯ä¸€ä½è¿›è¡Œå¯¹æ¯”ï¼Œä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„ä½éƒ½ä¸º 1 æ—¶ï¼Œç»“æœä¸º 1ï¼Œå¦åˆ™éƒ½ä¸º 0ï¼Œå¦‚ä¸‹

![](https://gitee.com/IsboyJC/PictureBed/raw/master/other/image-20201122161948275.png)



**ä¾‹å¦‚ï¼š** 

æ±‚ `25 & 3` ï¼Œå³æ±‚åè¿›åˆ¶ 25 å’Œ åè¿›åˆ¶ 3 çš„ä¸æ“ä½œå€¼

æˆ‘ä»¬åˆ†åˆ«æ±‚å‡º 25 å’Œ 3 çš„äºŒè¿›åˆ¶è¿›è¡Œæ¯”å¯¹å³å¯

```js
25 = 0000 0000 0000 0000 0000 0000 0001 1001
 3 = 0000 0000 0000 0000 0000 0000 0000 0011
--------------------------------------------
&  = 0000 0000 0000 0000 0000 0000 0000 0001
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œæœ€ç»ˆæˆ‘ä»¬æ¯”å¯¹çš„äºŒè¿›åˆ¶ç»“æœä¸º `0000 ... 0001`ï¼Œå³åè¿›åˆ¶æ•°å­— 1



#### ä½¿ç”¨æŒ‰ä½ä¸ & åˆ¤æ–­å¥‡å¶æ•°

æŒ‰ä½ä¸è¿™ä¸ªä¸œè¥¿å¹³å¸¸ç”¨çš„ä¸å¤ªå¤šï¼Œæˆ‘ä¸€èˆ¬åªä¼šåœ¨åˆ¤æ–­å¥‡å¶æ•°çš„æ‰ä¼šç”¨åˆ°ï¼Œå¦‚ä¸‹ï¼š

```js
å¶æ•° & 1 // 0
å¥‡æ•° & 1 // 1
```

å› ä¸ºåè¿›åˆ¶æ•°å­— 1 çš„äºŒè¿›åˆ¶ä¸º `0000 ... 0001`ï¼Œåªæœ‰æœ€åä¸€ä½ä¸º 1ï¼Œå…¶ä½™ä½éƒ½æ˜¯ 0 ï¼Œæ‰€ä»¥ä»»ä½•æ•°å­—å’Œå®ƒå¯¹æ¯”é™¤æœ€åä¸€ä½å…¶ä½™éƒ½æ˜¯ 0ï¼Œé‚£ä¹ˆå½“è¿™ä¸ªæ•°å­—æœ«ä½ä¸º 1 æ—¶ï¼Œä¹Ÿå°±æ˜¯å¥‡æ•°ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯ 1ï¼Œè¿™ä¸ªæ•°å­—æœ«ä½ä¸º 0 æ—¶ï¼Œä¹Ÿå°±æ˜¯å¶æ•°ï¼Œé‚£ä¹ˆç»“æœå°±æ˜¯ 0ï¼Œæ¯•ç«ŸäºŒè¿›åˆ¶åªæœ‰ 0 å’Œ 1



#### ä½¿ç”¨æŒ‰ä½ä¸ & åˆ¤æ–­æ•°å­—æ˜¯å¦ä¸º2çš„æ•´æ•°å¹‚

åˆ¤æ–­æ•°å­—æ˜¯å¦ä¸º 2 çš„æ•´æ•°å¹‚ï¼Œä½¿ç”¨ `n & (n - 1) ` 

```js
let a = 20;
let b = 32;

a & (a - 1) // 16 aä¸æ˜¯2çš„æ•´æ•°å¹‚
b & (b - 1) // 0 	bæ˜¯2çš„æ•´æ•°å¹‚
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œå¥—ç”¨è¿™ä¸ªå°å…¬å¼ï¼Œå½“ç»“æœç­‰äº 0 æ—¶ï¼Œæ•°å€¼å°±æ˜¯ 2 çš„æ•´æ•°å¹‚

å…¶å®åŸç†ä¹Ÿå¾ˆç®€å•ï¼Œé¦–å…ˆæˆ‘ä»¬æ¥çœ‹æ•°å€¼ 2 çš„å¹‚å¯¹åº”çš„äºŒè¿›åˆ¶

```js
0000 0001  -> 1  	// 2^0
0000 0010  -> 2		// 2^1
0000 0100  -> 4		// 2^2
0000 1000  -> 8		// 2^3
0001 0000  -> 16	// 2^4
```

å¦‚ä¸Šï¼Œ2 çš„å¹‚åœ¨äºŒè¿›åˆ¶ä¸­åªæœ‰ä¸€ä¸ª 1 åè·Ÿä¸€äº› 0ï¼Œé‚£ä¹ˆæˆ‘ä»¬åœ¨åˆ¤æ–­ä¸€ä¸ªæ•°å­—æ˜¯ä¸æ˜¯ 2 çš„å¹‚æ—¶ï¼Œç”¨ `n & (n-1)`ï¼Œå¦‚æœ ä½ æ˜¯ 2 çš„å¹‚ï¼Œn å‡ 1 ä¹‹åçš„äºŒè¿›åˆ¶å°±æ˜¯åŸæ¥çš„é‚£ä¸€ä½ 1 å˜æˆ 0ï¼Œåé¢çš„ 0 å…¨å˜æˆ 1ï¼Œè¿™ä¸ªæ—¶å€™å†å’Œè‡ªèº«åšæŒ‰ä½ä¸å¯¹æ¯”æ—¶ï¼Œæ¯ä¸€ä½éƒ½ä¸åŒï¼Œæ‰€ä»¥æ¯ä¸€ä½éƒ½æ˜¯ 0ï¼Œå³æœ€ç»ˆç»“æœä¸º 0

åˆšå¥½é€‚ç”¨äº ğŸ‘‰ [LeetCode 231 é¢˜](https://leetcode-cn.com/problems/power-of-two/) 



### æŒ‰ä½æˆ– ORï¼ˆï½œï¼‰

#### ç®€è¿°

æŒ‰ä½æˆ–ç”¨ç¬¦å· `|` æ¥è¡¨ç¤ºï¼Œå®ƒä¹Ÿæœ‰ä¸¤ä¸ªæ“ä½œæ•°ï¼ŒæŒ‰ä½æˆ–ä¹Ÿæ˜¯å°†ä¸¤ä¸ªæ“ä½œæ•°äºŒè¿›åˆ¶çš„æ¯ä¸€ä½è¿›è¡Œå¯¹æ¯”ï¼Œåªä¸è¿‡æŒ‰ä½æˆ–æ˜¯ä¸¤è¾¹åªè¦æœ‰ä¸€ä¸ª 1 ï¼Œç»“æœå°±æ˜¯ 1ï¼Œåªæœ‰ä¸¤è¾¹éƒ½æ˜¯ 0 ï¼Œç»“æœæ‰ä¸º 0ï¼Œå¦‚ä¸‹

![](https://gitee.com/IsboyJC/PictureBed/raw/master/other/image-20201122171909201.png)



**ä¾‹å¦‚ï¼š** 

æ±‚ `25 ï½œ 3` ï¼Œå³æ±‚åè¿›åˆ¶ 25 å’Œ åè¿›åˆ¶ 3 çš„æˆ–æ“ä½œå€¼

æˆ‘ä»¬åˆ†åˆ«æ±‚å‡º 25 å’Œ 3 çš„äºŒè¿›åˆ¶è¿›è¡Œæ¯”å¯¹å³å¯

```js
25 = 0000 0000 0000 0000 0000 0000 0001 1001
 3 = 0000 0000 0000 0000 0000 0000 0000 0011
--------------------------------------------
|  = 0000 0000 0000 0000 0000 0000 0001 1011
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œæœ€ç»ˆæˆ‘ä»¬æ¯”å¯¹çš„äºŒè¿›åˆ¶ç»“æœä¸º `0000 ... 0001 1011`ï¼Œå³åè¿›åˆ¶æ•°å­— 27



#### ä½¿ç”¨æŒ‰ä½æˆ– ï½œ å–æ•´

å–æ•´çš„æ—¶å€™æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‰ä½æˆ–å–æ•´

```js
1.111 | 0 // 1
2.234 | 0 // 2
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œåªéœ€è¦å°†å°æ•°åŒ 0 è¿›è¡ŒæŒ‰ä½æˆ–è¿ç®—å³å¯

åŸç†ä¹Ÿç®€å•ï¼Œä½è¿ç®—æ“ä½œçš„æ˜¯æ•´æ•°ï¼Œç›¸å½“äºæ•°å€¼çš„æ•´æ•°éƒ¨åˆ†å’Œ 0 è¿›è¡ŒæŒ‰ä½æˆ–è¿ç®—

0 çš„äºŒè¿›åˆ¶å…¨æ˜¯ 0 ï¼ŒæŒ‰ä½æˆ–å¯¹æ¯”æ—¶ 1 å’Œ 0 å°±æ˜¯ 1 ï¼Œ0 å’Œ 0 å°±æ˜¯ 0ï¼Œå¾—å‡ºçš„äºŒè¿›åˆ¶å°±æ˜¯æˆ‘ä»¬è¦å–æ•´æ•°å€¼çš„æ•´æ•°éƒ¨åˆ†



#### ä½¿ç”¨æŒ‰ä½æˆ– | ä»£æ›¿Math.round()

æˆ‘ä»¬ä¸Šé¢çŸ¥é“æŒ‰ä½æˆ–å¯ä»¥å–æ•´ï¼Œå…¶å®å››èˆäº”å…¥ä¹Ÿå°±é‚£ä¹ˆå›äº‹äº†ï¼Œå³æ­£æ•°åŠ  0.5ï¼Œè´Ÿæ•°å‡ 0.5 è¿›è¡ŒæŒ‰ä½æˆ–å–æ•´å³å¯ï¼Œé“ç†å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œå¦‚ä¸‹

```js
let a1 = 1.1
let a2 = 1.6
a1 + 0.5 | 0 // 1
a2 + 0.5 | 0 // 2

let b1 = -1.1
let b2 = -1.6
b1 - 0.5 | 0 // -1
b2 - 0.5 | 0 // -2
```





### æŒ‰ä½å¼‚æˆ– XORï¼ˆ^ï¼‰

#### ç®€è¿°

æŒ‰ä½å¼‚æˆ–ä½¿ç”¨å­—ç¬¦ `^` æ¥è¡¨ç¤ºï¼ŒæŒ‰ä½å¼‚æˆ–å’ŒæŒ‰ä½æˆ–çš„åŒºåˆ«å…¶å®å°±æ˜¯åœ¨æ¯”å¯¹æ—¶ï¼ŒæŒ‰ä½å¼‚æˆ–åªåœ¨ä¸€ä½æ˜¯ 1 æ—¶è¿”å› 1ï¼Œä¸¤ä½éƒ½æ˜¯ 1 æˆ–è€…ä¸¤ä½éƒ½æ˜¯ 0 éƒ½è¿”å› 0ï¼Œå¦‚ä¸‹

![](https://gitee.com/IsboyJC/PictureBed/raw/master/other/image-20201122172631261.png)

å¼‚æˆ–çš„è¿ç®—è¿‡ç¨‹å¯ä»¥å½“ä½œæŠŠä¸¤ä¸ªæ•°åŠ èµ·æ¥ï¼Œç„¶åè¿›ä½å»æ‰ï¼Œ0 + 0 = 0ï¼Œ1 + 0 = 1ï¼Œ1 + 1 = 0ï¼Œè¿™æ ·ä¼šå¥½è®°äº›



**ä¾‹å¦‚ï¼š** 

æ±‚ `25 ^ 3` ï¼Œå³æ±‚åè¿›åˆ¶ 25 å’Œ åè¿›åˆ¶ 3 çš„å¼‚æˆ–å€¼

æˆ‘ä»¬åˆ†åˆ«æ±‚å‡º 25 å’Œ 3 çš„äºŒè¿›åˆ¶è¿›è¡Œæ¯”å¯¹å³å¯

```js
25 = 0000 0000 0000 0000 0000 0000 0001 1001
 3 = 0000 0000 0000 0000 0000 0000 0000 0011
--------------------------------------------
|  = 0000 0000 0000 0000 0000 0000 0001 1010
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œæœ€ç»ˆæˆ‘ä»¬æ¯”å¯¹çš„äºŒè¿›åˆ¶ç»“æœä¸º `0000 ... 0001 1010`ï¼Œå³åè¿›åˆ¶æ•°å­— 26



#### ä½¿ç”¨æŒ‰ä½å¼‚æˆ– ^ åˆ¤æ–­æ•´æ•°éƒ¨åˆ†æ˜¯å¦ç›¸ç­‰

æŒ‰ä½å¼‚æˆ–å¯ä»¥ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªæ•´æ•°æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚ä¸‹

```js
let a = 1
let b = 1
a ^ b // 0

1 ^ 1 // 0
2 ^ 2 // 0
3 ^ 3 // 0
```

è¿™æ˜¯å› ä¸ºæŒ‰ä½å¼‚æˆ–åªåœ¨ä¸€ä½æ˜¯ 1 æ—¶è¿”å› 1ï¼Œä¸¤ä½éƒ½æ˜¯ 1 æˆ–è€…ä¸¤ä½éƒ½æ˜¯ 0 éƒ½è¿”å› 0ï¼Œä¸¤ä¸ªç›¸åŒçš„æ•°å­—äºŒè¿›åˆ¶éƒ½æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥éƒ½æ˜¯ 0

æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ä½œåˆ¤æ–­ä¸¤ä¸ªå°æ•°çš„æ•´æ•°éƒ¨åˆ†æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚ä¸‹

```js
2.1 ^ 2.5 // 0
2.2 ^ 2.6 // 0
2.1 ^ 3.1 // 1
```

è¿™æ˜¯ä¸ºä»€ä¹ˆï¼Ÿç‰¢è®°ä½è¿ç®—æ“ä½œçš„æ˜¯æ•´æ•°ã€æ˜¯æ•´æ•°ã€æ˜¯æ•´æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šé¢è¿™å‡ ä¸ªå¯¹æ¯”å®Œå…¨å¯ä»¥ç†è§£ä¸ºåŒä¸‹

```js
2 ^ 2 // 0
2 ^ 2 // 0
2 ^ 3 // 1
```



#### ä½¿ç”¨æŒ‰ä½å¼‚æˆ– ^ æ¥å®Œæˆå€¼äº¤æ¢

æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨æŒ‰ä½å¼‚æˆ–æ¥è¿›è¡Œä¸¤ä¸ªå˜é‡çš„å€¼äº¤æ¢ï¼Œå¦‚ä¸‹

```js
let a = 1
let b = 2
a ^= b
b ^= a
a ^= b
console.log(a)   // 2
console.log(b)   // 1
```

é“ç†ä¹Ÿå¾ˆç®€å•ï¼Œæˆ‘ä»¬å…ˆè¦äº†è§£ä¸€ä¸ªä¸œè¥¿

```js
// å¦‚æœ
a ^ b = c
// é‚£ä¹ˆ
c ^ b = a
c ^ a = b
```

ç°åœ¨ä½ å†å“ä¸€ä¸‹å€¼äº¤æ¢ä¸ºä»€ä¹ˆå¯ä»¥äº¤æ¢ï¼Œç»†å“

ä¸è¿‡è¿™é‡Œä½¿ç”¨ `^` æ¥åšå€¼äº¤æ¢ä¸å¦‚ç”¨ ES6 çš„è§£æ„ï¼Œå› ä¸º ES6 è§£æ„æ›´æ–¹ä¾¿æ˜“æ‡‚



#### ä½¿ç”¨æŒ‰ä½å¼‚æˆ– ^ åˆ‡æ¢ 0 å’Œ 1

åˆ‡æ¢ 0 å’Œ 1ï¼Œå³å½“å˜é‡ç­‰äº 0 æ—¶ï¼Œå°†å®ƒå˜æˆ 1ï¼Œå½“å˜é‡ç­‰äº 1 æ—¶ï¼Œå°†å®ƒå˜æˆ 0

å¸¸ç”¨äº `toggle ` å¼€å…³çŠ¶æ€åˆ‡æ¢ï¼Œåšå¼€å…³çŠ¶æ€æ›´æ”¹æ—¶ï¼Œæ™®é€šå°ä¼™ä¼´ä¼šå¦‚ä¸‹è¿™æ ·åš

```js
let toggle = 0

if(toggle){
  toggle = 0
}else{
  toggle = 1
}
```

èªæ˜ç‚¹çš„å°ä¼™ä¼´ä¼šç”¨ä¸‰ç›®è¿ç®—ç¬¦

```js
let toggle = 0

toggle = toggle ? 0 : 1
```

ä½¿ç”¨æŒ‰ä½å¼‚æˆ–æ›´ç®€å•

```js
let toggle = 0

toggle ^= 1
```

åŸç†ä¹Ÿç®€å•ï¼Œ `toggle ^= 1` ç­‰åŒäº `toggle = toggle ^ 1`ï¼Œæˆ‘ä»¬çŸ¥é“ `0 ^ 1` ç­‰äº 1ï¼Œè€Œ `1 ^ 1` åˆ™ä¸º 0



#### ä½¿ç”¨æŒ‰ä½å¼‚æˆ– ^ åˆ¤æ–­ä¸¤æ•°ç¬¦å·æ˜¯å¦ç›¸åŒ

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `(a ^ b) >= 0` æ¥åˆ¤æ–­ä¸¤ä¸ªæ•°å­—ç¬¦å·æ˜¯å¦ç›¸åŒï¼Œä¹Ÿå°±æ˜¯è¯´åŒä¸ºæ­£æˆ–åŒä¸ºè´Ÿ

```js
let a = 1
let b = 2
let c = -2

(a ^ b) >= 0 // true
(a ^ c) >= 0 // false
```

åŸç†ä¹Ÿç®€å•ï¼Œæ­£æ•°äºŒè¿›åˆ¶å·¦é¦–ä½ä¹Ÿå°±æ˜¯ç¬¦å·ä½æ˜¯ 0ï¼Œè€Œè´Ÿæ•°åˆ™æ˜¯ 1

æŒ‰ä½å¼‚æˆ–åœ¨å¯¹æ¯”æ—¶ï¼Œåªæœ‰ä¸€æ­£ä¸€è´Ÿæ—¶æ‰ä¸º 1ï¼Œä¸¤ä½éƒ½æ˜¯ 0 æˆ–è€…éƒ½æ˜¯ 1 æ—¶ç»“æœä¸º 0

æ‰€ä»¥ï¼Œä¸¤ä¸ªæ•°å€¼ç¬¦å·ä¸€æ ·æ—¶æŒ‰ä½å¼‚æˆ–å¯¹æ¯”åçš„äºŒè¿›åˆ¶ç»“æœç¬¦å·ä½è‚¯å®šæ˜¯ 0ï¼Œæœ€ç»ˆæ•°å€¼ä¹Ÿå°±æ˜¯ `>=0`ï¼Œåä¹‹åˆ™ `<0` 



### å·¦ç§»ï¼ˆ<<ï¼‰

#### ç®€è¿°

å·¦ç§»ç”¨ç¬¦å· `<<` æ¥è¡¨ç¤ºï¼Œæ­£å¦‚å®ƒçš„åå­—ï¼Œå³å°†æ•°å€¼çš„äºŒè¿›åˆ¶ç æŒ‰ç…§æŒ‡å®šçš„ä½æ•°å‘å·¦ç§»åŠ¨ï¼Œç¬¦å·ä½ä¸å˜



**ä¾‹å¦‚ï¼š ** 

æ±‚ `2 << 5`ï¼Œå³æ±‚åè¿›åˆ¶æ•° 2 å·¦ç§» 5 ä½çš„æ“ä½œ

æˆ‘ä»¬å…ˆå°†åè¿›åˆ¶æ•°å­— 2 è½¬äºŒè¿›åˆ¶å†å·¦ç§» 5 ä½åå¦‚ä¸‹å›¾

![](https://gitee.com/IsboyJC/PictureBed/raw/master/other/image-20201122175424438.png)

æˆ‘ä»¬å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶ï¼Œè½¬ä¸º 10 è¿›åˆ¶å³ä¸ºæ•°å€¼ 64

æ•°å­— x å·¦ç§» y ä½æˆ‘ä»¬å…¶å®å¯ä»¥å¾—åˆ°ä¸€ä¸ªå…¬å¼ï¼Œå¦‚ä¸‹

```js
x << y 

// ç­‰åŒäº

x * 2^y
```



#### ä½¿ç”¨å·¦ç§» << å–æ•´

ä½¿ç”¨å·¦ç§»ä¹Ÿå¯å–æ•´

```js
1.111 << 0 // 1
2.344 << 0 // 2
```

åŸç†æ˜¯ä½è¿ç®—æ“ä½œçš„æ˜¯æ•´æ•°ï¼Œå¿½ç•¥å°æ•°éƒ¨åˆ†ï¼Œç­‰åŒäºæ•°å€¼çš„æ•´æ•°éƒ¨åˆ†ï¼Œå·¦ç§» 0 ä½ï¼Œç»“æœè¿˜æ˜¯æ•´æ•°éƒ¨åˆ†



### æœ‰ç¬¦å·å³ç§»ï¼ˆ>>ï¼‰

#### ç®€è¿°

æœ‰ç¬¦å·å³ç§»ç”¨ç¬¦å· `>>` æ¥è¡¨ç¤ºï¼Œå³å°†æ•°å€¼çš„äºŒè¿›åˆ¶ç æŒ‰ç…§æŒ‡å®šçš„ä½æ•°å‘å³ç§»åŠ¨ï¼Œç¬¦å·ä½ä¸å˜ï¼Œå®ƒå’Œå·¦ç§»ç›¸å



**ä¾‹å¦‚ï¼š**

æ±‚ `64 >> 5`ï¼Œå³æ±‚åè¿›åˆ¶æ•° 64 æœ‰ç¬¦å·å³ç§» 5 ä½çš„æ“ä½œ

æˆ‘ä»¬å…ˆå°†åè¿›åˆ¶æ•°å­— 64 è½¬äºŒè¿›åˆ¶å†å³ç§» 5 ä½åå¦‚ä¸‹å›¾

![](https://cdn.jsdelivr.net/gh/isboyjc/PictureBed/other/image-20201128163121995.png)

æœ‰ç¬¦å·å³ç§»æ—¶ç§»åŠ¨æ•°ä½åä¼šåŒæ ·ä¹Ÿä¼šé€ æˆç©ºä½ï¼Œç©ºä½ä½äºæ•°å­—çš„å·¦ä¾§ï¼Œä½†ä½äºç¬¦å·ä½ä¹‹åï¼Œ`ECMAScript` ä¸­ç”¨ç¬¦å·ä½çš„å€¼å¡«å……è¿™äº›ç©ºä½

éšåï¼Œæˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€ä¸ªæ–°çš„äºŒè¿›åˆ¶ï¼Œè½¬ä¸º 10 è¿›åˆ¶å³ä¸ºæ•°å€¼ 2ï¼Œå…¶å®å°±æ˜¯å·¦ç§»çš„é€†è¿ç®—

åŒæ ·ï¼Œæ•°å­— x æœ‰ç¬¦å·å³ç§» y ä½æˆ‘ä»¬ä¹Ÿå¯ä»¥å¾—åˆ°ä¸€ä¸ªå…¬å¼ï¼Œå¦‚ä¸‹

```js
x >> y 

// ç­‰åŒäº

x / 2^y
```



#### ä½¿ç”¨å³ç§» >> å–æ•´

ä½¿ç”¨å³ç§»å’Œå·¦ç§»ä¸€æ ·éƒ½å¯ä»¥å–æ•´

```js
1.111 >> 0 // 1
2.344 >> 0 // 2
```

åŸç†è¿˜æ˜¯é‚£ä¸€ä¸ªï¼Œä½è¿ç®—æ“ä½œçš„æ˜¯æ•´æ•°ï¼Œå¿½ç•¥å°æ•°éƒ¨åˆ†ï¼Œç­‰åŒäºæ•°å€¼çš„æ•´æ•°éƒ¨åˆ†ï¼Œå³ç§» 0 ä½ï¼Œç»“æœè¿˜æ˜¯æ•´æ•°éƒ¨åˆ†



### æ— ç¬¦å·å³ç§»ï¼ˆ>>>ï¼‰

#### ç®€è¿°

æ— ç¬¦å·å³ç§»ä½¿ç”¨ `>>>` è¡¨ç¤ºï¼Œå’Œæœ‰ç¬¦å·å³ç§»åŒºåˆ«å°±æ˜¯å®ƒæ˜¯ä¸‰ä¸ªå¤§äºå·ï¼Œå®ƒä¼šå°†æ•°å€¼çš„æ‰€æœ‰ 32 ä½å­—ç¬¦éƒ½å³ç§»

å¯¹äºæ­£æ•°ï¼Œæ— ç¬¦å·å³ç§»ä¼šç»™ç©ºä½éƒ½è¡¥ 0 ï¼Œä¸ç®¡ç¬¦å·ä½æ˜¯ä»€ä¹ˆï¼Œè¿™æ ·çš„è¯æ­£æ•°çš„æœ‰ç¬¦å·å³ç§»å’Œæ— ç¬¦å·å³ç§»ç»“æœéƒ½æ˜¯ä¸€è‡´çš„

è´Ÿæ•°å°±ä¸ä¸€æ ·äº†ï¼Œå½“æŠŠä¸€ä¸ªè´Ÿæ•°è¿›è¡Œæ— ç¬¦å·å³ç§»æ—¶ä¹Ÿå°±æ˜¯è¯´æŠŠè´Ÿæ•°çš„äºŒè¿›åˆ¶ç åŒ…æ‹¬ç¬¦å·ä¸ºå…¨éƒ¨å³ç§»ï¼Œå‘å³è¢«ç§»å‡ºçš„ä½è¢«ä¸¢å¼ƒï¼Œå·¦ä¾§ç”¨0å¡«å……ï¼Œç”±äºç¬¦å·ä½å˜æˆäº† 0ï¼Œæ‰€ä»¥ç»“æœæ€»æ˜¯éè´Ÿçš„

é‚£ä¹ˆå¯èƒ½å°±æœ‰äººè¦é—®äº†ï¼Œå¦‚æœä¸€ä¸ªè´Ÿæ•°æ— ç¬¦å·å³ç§» 0 ä½å‘¢ï¼Œæˆ‘ä»¬å¯ä»¥æµ‹è¯•ä¸€ä¸‹

è®©åè¿›åˆ¶ -1 è¿›è¡Œæ— ç¬¦å·å³ç§» 0 ä½

-1 æ˜¯è´Ÿæ•°ï¼Œåœ¨å†…å­˜ä¸­äºŒè¿›åˆ¶å­˜å‚¨æ˜¯è¡¥ç å³ `1111 .... 1111 1111`ï¼Œ32 ä½éƒ½æ˜¯ 1ï¼Œæˆ‘ä»¬åœ¨ç¨‹åºä¸­å†™å…¥ `-1 >>> 0` è¿è¡Œå¾—åˆ°åè¿›åˆ¶æ•°å­— `4294967295` ï¼Œå†ä½¿ç”¨äºŒè¿›åˆ¶è½¬æ¢å·¥å…·è½¬ä¸ºäºŒè¿›åˆ¶å¾—åˆ°çš„å°±æ˜¯ 32 ä½äºŒè¿›åˆ¶ `1111 .... 1111 1111`ï¼Œæ‰€ä»¥å°±ç®—æ— ç¬¦å·å³ç§» 0 ä½ï¼Œå¾—å‡ºçš„ä¾ç„¶æ˜¯ä¸€ä¸ªå¾ˆå¤§çš„æ­£æ•°



#### ä½¿ç”¨æ— ç¬¦å·å³ç§» >>> å–æ•´ï¼ˆæ­£æ•°ï¼‰

æ— ç¬¦å·å³ç§»å’Œæœ‰ç¬¦å·å³ç§»ä»¥åŠå·¦ç§»éƒ½å·®ä¸å¤šï¼Œç§» 0 ä½éƒ½å¯å–æ•´ï¼Œåªä¸è¿‡æ— ç¬¦å·å³ç§»åªèƒ½æ”¯æŒæ­£æ•°çš„å–æ•´ï¼Œè‡³äºåŸç†ï¼Œè¯´è¿‡æ— æ•°éäº†ï¼Œç›¸ä¿¡ä½ å·²ç»è®°ä½äº†ï¼Œå¦‚ä¸‹

```js
1.323 >>> 0 // 1
2.324 >>> 0 // 2
```



## ä½¿ç”¨ä½è¿ç®—ç®¡ç†æƒé™

é™¤äº†ä¸Šæ–‡ä¸­æ¯ç§ä½è¿ç®—çš„ä½¿ç”¨åœºæ™¯å¤–ï¼Œè¿˜æœ‰ä¸€ç§ç¨å¾®å¤æ‚é‚£ä¹ˆä¸€ä¸¢ä¸¢ç”±å¤šä¸ªä½è¿ç®—ç¬¦ç»„åˆä½¿ç”¨çš„åœºæ™¯ï¼Œé‚£å°±æ˜¯æƒé™ç®¡ç†ï¼Œæœ¬æ¥æ²¡æ‰“ç®—å†™ç€è¿™ä¸ªï¼Œä½†æ˜¯åº”å¾ˆå¤šå°ä¼™ä¼´è¦æ±‚ï¼Œè¡¥å……è¿›æ¥äº†

åœ¨æˆ‘ä»¬ç†ŸçŸ¥çš„ Vue æºç ä¸­ï¼Œå°±ç”¨äº†ä½è¿ç®—æ¥åšé‰´æƒï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä»¥ Vue è¿™éƒ¨åˆ†æºç ä¸ºä¾‹å­æ¥è§£é‡Š

åœ¨ Vue æºç ä¸­ï¼Œ[patchFlags](https://github.com/vuejs/vue-next/blob/master/packages/shared/src/patchFlags.ts)  æ–‡ä»¶æ˜¯ `VisualDOM` ä¸­å¯¹ `vnode` çš„ç±»å‹æ ‡è®°ï¼Œä½œç”¨æ˜¯åœ¨æ›´æ–° `DOMæ ‘` çš„æ—¶å€™ä¼šæ ¹æ® `vnode` çš„ç±»å‹æ¥ä½¿ç”¨ä¸åŒçš„æ›´æ–°ç­–ç•¥ï¼ˆè¿™å—ä¸æ‡‚ä¸é‡è¦ï¼‰ï¼Œæˆ‘ä»¬æ¥çœ‹è¿™é‡Œå¯¹ç±»å‹çš„å®šä¹‰

```js
// Patch flags can be combined using the | bitwise operator and can be checked
// using the & operator, e.g.
//
//   const flag = TEXT | CLASS
//   if (flag & TEXT) { ... }
//
// Check the `patchElement` function in './renderer.ts' to see how the
// flags are handled during diff.
export const enum PatchFlags {
  TEXT = 1, // 1 << 0
  CLASS = 1 << 1,
  STYLE = 1 << 2,
  PROPS = 1 << 3,
  FULL_PROPS = 1 << 4,
  HYDRATE_EVENTS = 1 << 5,
  STABLE_FRAGMENT = 1 << 6,
  KEYED_FRAGMENT = 1 << 7,
  UNKEYED_FRAGMENT = 1 << 8,
  NEED_PATCH = 1 << 9,
  DYNAMIC_SLOTS = 1 << 10,

  // SPECIAL FLAGS -------------------------------------------------------------

  // Special flags are negative integers. They are never matched against using
  // bitwise operators (bitwise matching should only happen in branches where
  // patchFlag > 0), and are mutually exclusive. When checking for a special
  // flag, simply check patchFlag === FLAG.
  HOISTED = -1,
  BAIL = -2
}
```

ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œ`PatchFlags` ä¸­å®šä¹‰äº† `TEXTã€CLASS` ç­‰å…±è®¡ 11ç§ ç±»å‹ï¼Œé™¤äº†æœ€åä¸¤ç§ç‰¹æ®Šç±»å‹å¤–ï¼Œå…¶ä½™æ¯ä¸€ç§ç±»å‹çš„å€¼éƒ½æ˜¯ä¾æ¬¡å°† 1 å·¦ç§»ä¸€ä½å¾—åˆ°çš„

å…¶å®æ–‡æ¡£å¼€å¤´çš„æ³¨é‡Šé‡Œä½œè€…å¾ˆè´´å¿ƒçš„ç»™å‡ºäº†ç”¨æ³•ï¼Œå¯èƒ½æœ‰éƒ¨åˆ†åŒå­¦ä¸çˆ±çœ‹æˆ–è€…çœ‹ä¸å¤ªæ‡‚è‹±æ–‡

ç®€å•æ¥è¯´å°±æ˜¯ä¸‹é¢è¿™äº›ç±»å‹æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `|` æ¥è¿›è¡Œç»„åˆç±»å‹æƒé™èµ‹äºˆï¼Œä½¿ç”¨ `&` æ¥è¿›è¡Œç±»å‹æƒé™æ ¡éªŒ

æˆ‘ä»¬ä¸‹é¢å†ä»å¤´ç†ä¸€é



### å·¦ç§»ï¼ˆ<<ï¼‰åˆ†é…æƒé™

é¦–å…ˆï¼Œä½¿ç”¨ 1 çš„å·¦ç§»æ¥åˆ†é…å„ä¸ªç±»å‹æƒé™ï¼Œä¸Šæ–‡å·¦ç§»è¿ç®—æˆ‘ä»¬è¯´è¿‡ï¼Œå·¦ç§»å°±æ˜¯å°†æ•°å€¼çš„äºŒè¿›åˆ¶ç æŒ‰ç…§æŒ‡å®šçš„ä½æ•°å‘å·¦ç§»åŠ¨ï¼Œç¬¦å·ä½ä¸å˜ï¼Œé‚£ä¹ˆè¿™é‡Œå³å¦‚ä¸‹é¢è¿™æ ·

```js
// 1 çš„äºŒè¿›åˆ¶ä¸º 00000001

1 << 0  // 00000001
1 << 1  // 00000010
1 << 2  // 00000100
1 << 3  // 00001000
1 << 4  // 00010000
1 << 5  // 00100000

...
```

å¦‚ä¸Šæ‰€ç¤ºï¼Œæ‰€æœ‰çš„æƒé™ç±»å‹éƒ½æ˜¯å”¯ä¸€çš„ï¼Œå·²æ»¡è¶³æƒé™åˆ†é…è¦æ±‚ï¼Œé™¤æ­¤ä¹‹å¤–ï¼Œä¸Šé¢ç»è¿‡å·¦ç§»ä¹‹åçš„äºŒè¿›åˆ¶ä¸­éƒ½åªæœ‰ 1 ä½æ•°å­—æ˜¯ 1ï¼Œä½ å‘ç°äº†å—ğŸ˜„



### æŒ‰ä½ä¸ANDï¼ˆ&ï¼‰æ ¡éªŒæƒé™

æ¥ç€æˆ‘ä»¬çœ‹ç±»å‹æƒé™æ ¡éªŒï¼Œæˆ‘ä»¬å…ˆåˆå§‹åŒ–å‡ ä¸ªä¸åŒçš„ç”¨æˆ·æƒé™è§’è‰²

```js
let permission1 = 0 		// æ— ä»»ä½•æƒé™
let permission2 = TEXT 	// 1 >> 0 
let permission3 = CLASS // 1 >> 1
```

å‡å¦‚æˆ‘ä»¬çš„æ¡ä»¶æ˜¯åˆ¤æ–­è¯¥ç”¨æˆ·è§’è‰²æœ‰æ²¡æœ‰ `CLASS` æƒé™ï¼Œå³å¯ä»¥ç”¨ æŒ‰ä½ä¸ ANDï¼ˆ&ï¼‰åˆ¤æ–­

```js
if(permission1 & CLASS) // 00000000 & 00000010 = 00000000 = 0 = false
if(permission2 & CLASS) // 00000001 & 00000010 = 00000000 = 0 = false
if(permission3 & CLASS) // 00000010 & 00000010 = 00000010 = 2 = true
```

ä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºæˆ‘ä»¬ä¸Šé¢è¯´è¿‡ï¼Œ& å°±æ˜¯å°†ä¸¤ä¸ªæ“ä½œæ•°çš„äºŒè¿›åˆ¶æ¯ä¸€ä½è¿›è¡Œå¯¹æ¯”ï¼Œä¸¤ä¸ªæ“ä½œæ•°ç›¸åº”çš„ä½éƒ½ä¸º 1 æ—¶ï¼Œç»“æœä¸º 1ï¼Œå¦åˆ™éƒ½ä¸º 0



### æŒ‰ä½æˆ–ORï¼ˆï½œï¼‰èµ‹äºˆæƒé™

æ¥ä¸‹æ¥çœ‹æƒé™èµ‹äºˆä»¥åŠç»„åˆç±»å‹æƒé™

æˆ‘ä»¬æƒ³è¦ä¸€ä¸ª `TEXT` å’Œ `CLASS` çš„ç»„åˆæƒé™è§’è‰²ï¼ŒæŒ‰ç…§ Vue æºç æ³¨é‡Šä¸­æ‰€è¯´ï¼Œä½¿ç”¨ `|` ï¼Œå³æŒ‰ä½æˆ–OR

æŒ‰ä½æˆ–OR æˆ‘ä»¬ä¸Šé¢ä¹Ÿè¯´è¿‡äº†ï¼Œå°±æ˜¯æŠŠäºŒè¿›åˆ¶çš„æ¯ä¸€ä½è¿›è¡Œå¯¹æ¯”ï¼Œä¸¤è¾¹åªè¦æœ‰ä¸€ä¸ª 1 ï¼Œç»“æœå°±æ˜¯ 1ï¼Œåªæœ‰ä¸¤è¾¹éƒ½æ˜¯ 0 ï¼Œç»“æœæ‰ä¸º 0

```js
// åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ç”¨æˆ·è§’è‰² permission4 å¹¶åˆå§‹åŒ–ï¼Œåˆå§‹åŒ–è§’è‰²å³æ— æƒé™çŠ¶æ€ 0 
let permission4 = 0

// èµ‹äºˆ TEXTï¼ˆ1 >> 0ï¼‰ æƒé™
permission4 ï½œ= TEXT

// èµ‹äºˆ CLASSï¼ˆ1 << 1ï¼‰ æƒé™
permission4 ï½œ= CLASS

// æ–°çš„ç»„åˆç±»å‹çš„ç”¨æˆ·è§’è‰²æƒé™å³ 00000011 ï¼Œå¦‚ä¸‹
permission4 = 0 ï½œ TEXT ï½œ CLASS

// 0					 = 0000 0000
// TEXT  			 = 0000 0001
// CLASS 			 = 0000 0010
// -----------------------
// permission4 = 0000 0011


// æƒé™æ ¡éªŒï¼Œ& å¯¹æ¯”äºŒè¿›åˆ¶æ“ä½œä½
permission4 & TEXT 	// 0000 0011 & 0000 0001 = 0000 0001 = 1 = true
permission4 & CLASS // 0000 0011 & 0000 0010 = 0000 0010 = 2 = true
permission4 & STYLE // 0000 0011 & 0000 0100 = 0000 0000 = 0 = false
```

åˆ°æ­¤æˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨ `<<` ã€`|` ã€ `&` æ¥æ„‰å¿«çš„è¿›è¡Œæƒé™ç®¡ç†äº†ï¼Œä½  `get` åˆ°äº†å—?



## æœ€å

å…¶å®ç›®å‰ä½è¿ç®—åŸºç¡€çš„ä½¿ç”¨åœºæ™¯å¹¶ä¸å¹¿ï¼ŒåŸºæœ¬ä¸Šå¤§å¤šæ•°äººç”¨å°±æ˜¯ä¸Šæ–‡æ‰€è¯´é‚£æ ·å­ï¼Œæƒé™ç®¡ç†ã€å–æ•´ã€åˆ¤æ–­å¥‡å¶ã€åˆ¤æ–­-1ã€åˆ‡æ¢ 0/1 ç­‰ç­‰å‡ ä¸ªç”¨é€”ï¼Œå¦‚æœä½ è€å¿ƒçš„çœ‹å®Œäº†æ–‡ç« ï¼Œå°±ä¼šå‘ç°å…¶å®åŸç†å¾ˆç®€å•ï¼Œä¹Ÿå°±é‚£å›äº‹ï¼Œæ²¡æœ‰å¿…è¦æ•´å¤©å–Šæ‰“å–Šæ€ï¼Œè¿˜æ˜¯é‚£å¥è¯ï¼Œç”¨ä¸ç”¨å…¨å‡­è‡ªå·±ï¼Œä½†æ˜¯ä¸ç”¨ä¸æ˜¯ä¸ä¼šçš„ç†ç”±

åˆ°æ­¤å°±ç»“æŸäº†ï¼Œè¯·ä¸è¦åå•¬ä½ çš„èµï¼Œæ–‡ç« å¦‚æœ‰é”™è¯¯ï¼Œè¯·æŒ‡å‡ºï¼Œå…±åŒè¿›æ­¥ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶å…³æ³¨å…¬ä¼—å·ã€Œä¸æ­£ç»çš„å‰ç«¯ã€